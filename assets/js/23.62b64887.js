(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{220:function(t,s,a){"use strict";a.r(s);var e=a(0),n=Object(e.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),a("p",[t._v("Laratrust comes with an events system that works like the Laravel "),a("a",{attrs:{href:"https://laravel.com/docs/eloquent#events",target:"_blank",rel:"noopener noreferrer"}},[t._v("model events"),a("OutboundLink")],1),t._v(". The events that you can listen to are "),a("strong",[t._v("roleAttached")]),t._v(", "),a("strong",[t._v("roleDetached")]),t._v(", "),a("strong",[t._v("permissionAttached")]),t._v(", "),a("strong",[t._v("permissionDetached")]),t._v(", "),a("strong",[t._v("roleSynced")]),t._v(", "),a("strong",[t._v("permissionSynced")]),t._v(".")]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._m(4),t._v(" "),a("p",[t._v("The eventing system also supports observable classes:")]),t._v(" "),t._m(5),a("p",[t._v("To register an observer, use the laratrustObserve method on the model you wish to observe. You may register observers in the boot method of one of your service providers. In this example, we'll register the observer in the AppServiceProvider:")]),t._v(" "),t._m(6),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),t._m(12)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"events"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#events","aria-hidden":"true"}},[this._v("#")]),this._v(" Events")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),a("p",[t._v("Inside the Role model only the "),a("strong",[t._v("permissionAttached")]),t._v(", "),a("strong",[t._v("permissionDetached")]),t._v(" and "),a("strong",[t._v("permissionSynced")]),t._v(" events will be fired.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("If you want to listen to a Laratrust event, inside your "),s("code",[this._v("User")]),this._v(" or "),s("code",[this._v("Role")]),this._v(" models put this:")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token php language-php"}},[a("span",{attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("namespace")]),t._v(" "),a("span",{attrs:{class:"token package"}},[t._v("App")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),a("span",{attrs:{class:"token package"}},[t._v("Laratrust"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Traits"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("LaratrustUserTrait")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Model")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),a("span",{attrs:{class:"token package"}},[t._v("LaratrustUserTrait")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("boot")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("parent")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{attrs:{class:"token function"}},[t._v("boot")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{attrs:{class:"token function"}},[t._v("roleAttached")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$user")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$role")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$team")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{attrs:{class:"token function"}},[t._v("roleSynced")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token variable"}},[t._v("$user")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$changes")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$team")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("NOTE")]),this._v(" "),s("p",[this._v("The "),s("code",[this._v("$team")]),this._v(" parameter is optional and if you are not using teams, it will be set to null.")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token php language-php"}},[a("span",{attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("namespace")]),t._v(" "),a("span",{attrs:{class:"token package"}},[t._v("App"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Observers")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),a("span",{attrs:{class:"token package"}},[t._v("App"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("User")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("UserObserver")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("roleAttached")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("User "),a("span",{attrs:{class:"token variable"}},[t._v("$user")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$role")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$team")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("//")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("roleSynced")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("User "),a("span",{attrs:{class:"token variable"}},[t._v("$user")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$changes")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token variable"}},[t._v("$team")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("//")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token php language-php"}},[a("span",{attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("namespace")]),t._v(" "),a("span",{attrs:{class:"token package"}},[t._v("App"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Providers")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),a("span",{attrs:{class:"token package"}},[t._v("App"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("User")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),a("span",{attrs:{class:"token package"}},[t._v("App"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Observers"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("UserObserver")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),a("span",{attrs:{class:"token package"}},[t._v("Illuminate"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Support"),a("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("ServiceProvider")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("AppServiceProvider")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("ServiceProvider")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("boot")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        User"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{attrs:{class:"token function"}},[t._v("laratrustObserve")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("UserObserver"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("NOTE")]),this._v(" "),s("p",[this._v("Inside your observable classes you can have your normal model events methods alongside Laratrust's events methods.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"available-events"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#available-events","aria-hidden":"true"}},[this._v("#")]),this._v(" Available Events")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"user-events"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#user-events","aria-hidden":"true"}},[this._v("#")]),this._v(" User Events")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[a("p",[a("code",[t._v("roleAttached($user, $role, $team = null)")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("$user")]),t._v(": The user to whom the role was attached.")]),t._v(" "),a("li",[a("code",[t._v("$role")]),t._v(": The role id that was attached to the "),a("code",[t._v("$user")]),t._v(".")]),t._v(" "),a("li",[a("code",[t._v("$team")]),t._v(": The team id that was used to attach the role to the "),a("code",[t._v("$user")]),t._v(".")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("roleDetached($user, $role, $team = null)")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("$user")]),t._v(": The user to whom the role was detached.")]),t._v(" "),a("li",[a("code",[t._v("$role")]),t._v(": The role id that was detached from the "),a("code",[t._v("$user")]),t._v(".")]),t._v(" "),a("li",[a("code",[t._v("$team")]),t._v(": The team id that was used to detach the role from the "),a("code",[t._v("$user")]),t._v(".")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("permissionAttached($user, $permission, $team = null)")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("$user")]),t._v(": The user to whom the permission was attached.")]),t._v(" "),a("li",[a("code",[t._v("$permission")]),t._v(": The permission id that was attached to the "),a("code",[t._v("$user")]),t._v(".")]),t._v(" "),a("li",[a("code",[t._v("$team")]),t._v(": The team id that was used to attach the permission to the "),a("code",[t._v("$user")]),t._v(".")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("permissionDetached($user, $permission, $team = null)")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("$user")]),t._v(": The user to whom the permission was detached.")]),t._v(" "),a("li",[a("code",[t._v("$permission")]),t._v(": The permission id that was detached from the "),a("code",[t._v("$user")]),t._v(".")]),t._v(" "),a("li",[a("code",[t._v("$team")]),t._v(": The team id that was used to detach the permission from the "),a("code",[t._v("$user")]),t._v(".")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("roleSynced($user, $changes, $team)")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("$user")]),t._v(": The user to whom the roles were synced.")]),t._v(" "),a("li",[a("code",[t._v("$changes")]),t._v(": The value returned by the eloquent "),a("code",[t._v("sync")]),t._v(" method containing the changes made in the database.")]),t._v(" "),a("li",[a("code",[t._v("$team")]),t._v(": The team id that was used to sync the roles to the user.")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("permissionSynced()")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("$user")]),t._v(": The user to whom the permissions were synced.")]),t._v(" "),a("li",[a("code",[t._v("$changes")]),t._v(": The value returned by the eloquent "),a("code",[t._v("sync")]),t._v(" method containing the changes made in the database.")]),t._v(" "),a("li",[a("code",[t._v("$team")]),t._v(": The team id that was used to sync the permissions to the user.")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"role-events"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#role-events","aria-hidden":"true"}},[this._v("#")]),this._v(" Role Events")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[a("p",[a("code",[t._v("permissionAttached($role, $permission)")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("$role")]),t._v(": The role to whom the permission was attached.")]),t._v(" "),a("li",[a("code",[t._v("$permission")]),t._v(": The permission id that was attached to the "),a("code",[t._v("$role")]),t._v(".")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("permissionDetached($role, $permission)")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("$role")]),t._v(": The role to whom the permission was detached.")]),t._v(" "),a("li",[a("code",[t._v("$permission")]),t._v(": The permission id that was detached from the "),a("code",[t._v("$role")]),t._v(".")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("permissionSynced()")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("$role")]),t._v(": The role to whom the permissions were synced.")]),t._v(" "),a("li",[a("code",[t._v("$changes")]),t._v(": The value returned by the eloquent "),a("code",[t._v("sync")]),t._v(" method containing the changes made in the database.")])])])])}],!1,null,null,null);n.options.__file="events.md";s.default=n.exports}}]);